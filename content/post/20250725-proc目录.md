---
title: "/proc目录--pseudo-filesystem"
subtitle: " "
description: " "
date: 2025-07-25T10:14:25Z
author:      "Wayne"
image: ""
tags: ["/proc", "系统运行状态", "进程运行状态"]
categories: ["Tech"]
---

# introduce

`/proc `是 Linux 系统中的一个伪文件系统（pseudo-filesystem），用于访问内核和进程的实时信息。它是内存中的虚拟文件系统，挂载在 /proc 目录下，并不占用磁盘空间。**你可以把 /proc 看作是一个接口：用文件的方式访问 OS 系统本身运行状态以及各个进程的运行状态。**

# 分类

## /proc/[PID]/

每个正在运行的进程对应一个目录。如：

```bash
/proc/1/       # PID 为 1 的进程（通常是 systemd 或 init）
/proc/2345/    # PID 为 2345 的某个用户进程
```

目录下存放内容：

| 文件/目录 | 说明                             |
| --------- | -------------------------------- |
| `cmdline` | 该进程启动命令行参数             |
| `status`  | 进程状态、UID、线程数等          |
| `fd/`     | 打开的文件描述符（软链接形式）   |
| `exe`     | 进程对应的可执行文件（软链接）   |
| `cwd`     | 当前工作目录（软链接）           |
| `environ` | 环境变量（以 null 分隔的字符串） |
| `maps`    | 内存映射（共享库、堆栈等）       |

#### demos

```bash
[root@localhost ~]# ps -ef | grep packetbeat
root     17505 15365  0 18:54 pts/0    00:00:00 grep --color=auto packetbeat
root     23941     1  7 Jul24 ?        02:28:19 /usr/bin/packetbeat -c /etc/packetbeat/packetbeat.yml
[root@localhost ~]# cd /proc/239
2393/  23941/ 2396/
[root@localhost ~]# cd /proc/23941/
[root@localhost 23941]# ll
total 0
dr-xr-xr-x  2 root root 0 Jul 25 18:52 attr
-rw-r--r--  1 root root 0 Jul 25 18:52 autogroup
-r--------  1 root root 0 Jul 25 18:52 auxv
-r--r--r--  1 root root 0 Jul 24 11:22 cgroup
--w-------  1 root root 0 Jul 25 18:52 clear_refs
-r--r--r--  1 root root 0 Jul 24 11:22 cmdline
-rw-r--r--  1 root root 0 Jul 24 13:34 comm
-rw-r--r--  1 root root 0 Jul 25 18:52 coredump_filter
-r--r--r--  1 root root 0 Jul 25 18:52 cpuset
lrwxrwxrwx  1 root root 0 Jul 24 11:22 cwd -> /
-r--------  1 root root 0 Jul 24 11:23 environ
lrwxrwxrwx  1 root root 0 Jul 24 11:22 exe -> /usr/bin/packetbeat
dr-x------  2 root root 0 Jul 24 11:22 fd
dr-x------  2 root root 0 Jul 25 18:52 fdinfo
-rw-r--r--  1 root root 0 Jul 25 18:52 gid_map
-r--------  1 root root 0 Jul 25 18:52 io
-r--r--r--  1 root root 0 Jul 24 11:23 limits
-rw-r--r--  1 root root 0 Jul 25 18:52 loginuid
dr-x------  2 root root 0 Jul 25 18:52 map_files
-r--r--r--  1 root root 0 Jul 25 18:52 maps
-rw-------  1 root root 0 Jul 25 18:52 mem
-r--r--r--  1 root root 0 Jul 24 11:23 mountinfo
-r--r--r--  1 root root 0 Jul 25 18:52 mounts
-r--------  1 root root 0 Jul 25 18:52 mountstats
dr-xr-xr-x  6 root root 0 Jul 25 18:52 net
dr-x--x--x  2 root root 0 Jul 25 18:52 ns
-r--r--r--  1 root root 0 Jul 25 18:52 numa_maps
-rw-r--r--  1 root root 0 Jul 25 18:52 oom_adj
-r--r--r--  1 root root 0 Jul 25 18:52 oom_score
-rw-r--r--  1 root root 0 Jul 25 18:52 oom_score_adj
-r--r--r--  1 root root 0 Jul 25 18:52 pagemap
-r--------  1 root root 0 Jul 25 18:52 patch_state
-r--r--r--  1 root root 0 Jul 25 18:52 personality
-rw-r--r--  1 root root 0 Jul 25 18:52 projid_map
lrwxrwxrwx  1 root root 0 Jul 25 18:52 root -> /
-rw-r--r--  1 root root 0 Jul 25 18:52 sched
-r--r--r--  1 root root 0 Jul 25 18:52 schedstat
-r--r--r--  1 root root 0 Jul 25 18:52 sessionid
-rw-r--r--  1 root root 0 Jul 25 18:52 setgroups
-r--r--r--  1 root root 0 Jul 25 18:52 smaps
-r--r--r--  1 root root 0 Jul 25 18:52 stack
-r--r--r--  1 root root 0 Jul 24 11:22 stat
-r--r--r--  1 root root 0 Jul 24 11:23 statm
-r--r--r--  1 root root 0 Jul 24 11:22 status
-r--r--r--  1 root root 0 Jul 25 18:52 syscall
dr-xr-xr-x 17 root root 0 Jul 25 18:52 task
-r--r--r--  1 root root 0 Jul 25 18:52 timers
-rw-r--r--  1 root root 0 Jul 25 18:52 uid_map
-r--r--r--  1 root root 0 Jul 25 18:52 wchan
[root@localhost 23941]# cat status
Name:   packetbeat
Umask:  0022
State:  S (sleeping)
Tgid:   23941
Ngid:   0
Pid:    23941
PPid:   1
TracerPid:      0
Uid:    0       0       0       0
Gid:    0       0       0       0
FDSize: 128
Groups:
VmPeak:  1942440 kB
VmSize:  1903284 kB
VmLck:         0 kB
VmPin:         0 kB
VmHWM:     77632 kB
VmRSS:     50080 kB
RssAnon:           40352 kB
RssFile:            9728 kB
RssShmem:              0 kB
VmData:  1811424 kB
VmStk:       132 kB
VmExe:     48500 kB
VmLib:      2328 kB
VmPTE:       444 kB
VmSwap:     1708 kB
Threads:        15
SigQ:   0/127952
SigPnd: 0000000000000000
ShdPnd: 0000000000000000
SigBlk: 0000000000000000
SigIgn: 0000000000000000
SigCgt: fffffffdffc1feff
CapInh: 0000000000000000
CapPrm: 0000001fffffffff
CapEff: 0000001fffffffff
CapBnd: 0000001fffffffff
CapAmb: 0000000000000000
NoNewPrivs:     1
Seccomp:        2
Speculation_Store_Bypass:       thread force mitigated
Cpus_allowed:   ff
Cpus_allowed_list:      0-7
Mems_allowed:   00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000001
Mems_allowed_list:      0
voluntary_ctxt_switches:        560786
nonvoluntary_ctxt_switches:     7055
```

```bash
查看某进程打开的文件：

ls -l /proc/1234/fd
```

## 内核级别的系统信息（非 PID 相关）

| 文件/目录           | 描述                                   |
| ------------------- | -------------------------------------- |
| `/proc/cpuinfo`     | CPU 信息                               |
| `/proc/meminfo`     | 内存使用信息                           |
| `/proc/uptime`      | 系统启动时间和空闲时间（单位秒）       |
| `/proc/loadavg`     | 系统负载平均值（和 top/uptime 类似）   |
| `/proc/version`     | 内核版本信息                           |
| `/proc/filesystems` | 支持的文件系统类型                     |
| `/proc/swaps`       | swap 分区使用情况                      |
| `/proc/partitions`  | 系统分区信息                           |
| `/proc/interrupts`  | 中断处理情况                           |
| `/proc/modules`     | 当前加载的内核模块                     |
| `/proc/kallsyms`    | 所有内核符号地址（如函数地址）         |
| `/proc/sys/`        | 可调内核参数接口（可通过 sysctl 访问） |

#### demos

```bash
cat /proc/meminfo #查看系统内存

[root@localhost 23941]# cat /proc/meminfo
MemTotal:       32779736 kB
MemFree:         1104588 kB
MemAvailable:    7102420 kB
Buffers:               0 kB
Cached:          6583376 kB
SwapCached:        50304 kB
Active:         23220328 kB
Inactive:        5763444 kB
Active(anon):   19988820 kB
Inactive(anon):  3919612 kB
Active(file):    3231508 kB
Inactive(file):  1843832 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:      16515068 kB
SwapFree:       14681388 kB
Dirty:             12980 kB
Writeback:             0 kB
AnonPages:      22394808 kB
Mapped:           613064 kB
Shmem:           1508000 kB
Slab:            1588364 kB
SReclaimable:    1325328 kB
SUnreclaim:       263036 kB
KernelStack:       28560 kB
PageTables:        78932 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:    32904936 kB
Committed_AS:   37654420 kB
VmallocTotal:   34359738367 kB
VmallocUsed:      201740 kB
VmallocChunk:   34359341052 kB
Percpu:             1984 kB
HardwareCorrupted:     0 kB
AnonHugePages:   4278272 kB
CmaTotal:              0 kB
CmaFree:               0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:      337792 kB
DirectMap2M:    26925056 kB
DirectMap1G:     8388608 kB
```

# summary

| 特点   | 说明                                     |
| ------ | ---------------------------------------- |
| 虚拟   | 不占磁盘，基于内存生成                   |
| 实时   | 显示当前系统/进程的运行状态              |
| 易访问 | 所有信息以“文件”的形式展现，脚本容易操作 |
| 可调   | 一些文件是可写的，可以动态调内核参数     |
